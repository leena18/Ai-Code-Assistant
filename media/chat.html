<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link rel="stylesheet"  href="chat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/dracula.min.css">
</head>
<body>

    <div class="header">
        <span class="logo">
            <img src="" alt="">LASK.ai</span>
        <div class="icons">
            <img src="https://i.pinimg.com/originals/07/66/d1/0766d183119ff92920403eb7ae566a85.png" alt="Profile" id="profileIcon" alt="Profile" class="icon" />
            <img src="https://cdn-icons-png.flaticon.com/512/4873/4873245.png" alt="Info" class="icon" />
        </div>
    </div>

    <div class="tabs">
        <button class="tab active" id="chat-tab">Chat</button>
        <button class="tab " id="context-tab">Add Context</button>
    </div>

    

    <div class="to-hide">
        <div class="action-buttons">
            <button class="action">+ New</button>
            <button class="action history">
                <img src="https://cdn-icons-png.flaticon.com/512/14131/14131560.png" alt="">
                History
            </button>
        </div>
        
        <div class="welcome-content">
            <h1>Welcome to Lask AI Chat!</h1>

            <p> Code Smarter, Not Harder</p>
            <!-- <p>Then, you can either click on one of the actions listed below, type your request into the prompt area, or use the "/" command to quickly access specific actions.</p> -->
            <p><a href="#">User Guide</a></p>
        </div>

        <div class="action-listt">
            <button class="action-itemm" id="explain-code">/explain Code</button>
            <button class="action-itemm" id="write-docstrings">/write docstrings for code</button>
            <button class="action-itemm" id="generate-tests">/generate Test cases</button>
            <button class="action-itemm" id="explore-codebase">/explore Codebase</button>
            <button class="action-itemm" id="fix-code">/fix code</button>
        </div>
    </div>
    
    <div class="messages" id="messages"></div>
    <!-- Chat Container -->
    <div class="chat-container" id="chatContainer">
       
        <div class="input-container">
            <button class="action" id="/">/</button>
            <button class="action" id="@">@</button>
            <textarea id="messageInput" placeholder="Ask me anything..."></textarea>     
            <button id="sendButton">
                <img src="https://cdn-icons-png.freepik.com/512/10023/10023342.png?ga=GA1.1.1597380606.1728277263" alt="Ask AI" />
            </button>
            
        
        </div>
        <div class="send-buttons">
            
            <button id="generateCodeButton">Generate Code</button>
        </div>
    </div>
    
    <!-- Context Container -->
    <div class="context-container" id="contextContainer" style="display:none;">
        <!-- Context content goes here -->
        <h1>Context View</h1>
        <p>This is the context view where you can add context-related information.</p>
        <!-- Additional context-related elements can be added here -->
    </div>


    
    <!-- code mirror -->
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/meta.min.js"></script> <!-- For auto-detect -->
    
    <!-- Load marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Load highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

    <script src="chat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>

    <!-- Inside chat.html -->
<script>
    const messageInput = document.getElementById('messageInput');
    const commandSuggestions = document.getElementById('commandSuggestions');

    // Show command suggestions when "/" is typed
    messageInput.addEventListener('input', function () {
        const text = messageInput.value;
        if (text.startsWith('/')) {
            commandSuggestions.style.display = 'block'; // Show suggestions
            const commandList = ['explain', 'generateCode', 'fix']; // List of slash commands
            const matchingCommands = commandList.filter(cmd => cmd.startsWith(text.slice(1)));
            commandSuggestions.innerHTML = matchingCommands.map(cmd => `<li>${cmd}</li>`).join('');
        } else {
            commandSuggestions.style.display = 'none'; // Hide suggestions
        }
    });

    // Handle suggestion click
    commandSuggestions.addEventListener('click', function (event) {
        const command = event.target.textContent;
        messageInput.value = `/${command} `;
        commandSuggestions.style.display = 'none'; // Hide suggestions
    });

    // Submit message (Slash command)
    document.getElementById('sendMessageButton').addEventListener('click', function () {
        const message = messageInput.value.trim();
        if (message.startsWith('/')) {
            const command = message.split(' ')[0].slice(1);
            const args = message.split(' ').slice(1).join(' ');

            // Post the slash command message to the extension
            vscode.postMessage({
                command: command,
                args: args
            });
        } else {
            // Normal chat message handling
            vscode.postMessage({
                command: 'sendMessage',
                text: message
            });
        }
        messageInput.value = '';
    });
</script>

<ul id="commandSuggestions" style="display:none; position:absolute; background:#fff;">
    <!-- Slash command suggestions appear here -->
</ul>

</body>
</html>
